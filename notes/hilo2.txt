HI-LO 2.0


RULES

  At most 10 guesses per level.

  Each level L must be finished within time T(L):
    T(L) =  60 45 40 35 30 25 20 ...

  Score depends on time taken t:
    S(t) = 70 - t

  Game ends if:
    time left reaches 0   [ game over ]
    10 guesses and no win [ game over ]
    user presses 'C'      [ to calculator ]
    user presses '?'      [ restarts game ] (or clears guess)


STATES

  :START
    > HI-LO GAME ' :INIT_LEVEL

  :INIT_LEVEL
         LEVEL L ' >
    ___ GUESS    ? :PLAY

  :PLAY            [ :END_TIME ]
    X__        d ? >
    XX_        d ? > :END_GUESSES :WIN :SUB_ONE_MORE
    XXX TOO XX d ? X_
    ___        d ? X_

  :WIN
    XXX YOU WIN  ' >
      SS SECONDS ' >
       PP POINTS ' >
       SCORE XXX ' :LEVEL

  :END (_TIME or _GUESSES)
    XXX YOU LOST ' >
       GAME OVER ' >
       SCORE XXX =

  :SUBS
    1 MORE GUESS ' :SUB_ONE_MORE  [ pushed from PLAY ]
                 ' :SUB_FLASH     [ pushed from waiting for input ]
    HI-SCORE XXX ' :SUB_STATS     [ pushed from waiting for input ]


NOTES

  Legend
    '  pause
    d  digit if time left < 10s
    ?  waiting for input: %, C, ?, digit. Otherwise SUB_FLASH
    =  waiting for input: %, C, ?. Otherwise SUB_FLASH

  For subroutines, save
    state
    frame
    display
